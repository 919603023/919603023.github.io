"use strict";(self.webpackChunkblog_vuepress=self.webpackChunkblog_vuepress||[]).push([[3430],{7154:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-58d72736",path:"/blockchain/StarCoin/_blog/Starcoin%E4%B8%8EDapp/Starcoin%E4%B8%8EDapp.html",title:"",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"一、Dapp 的 产生背景",slug:"一、dapp-的-产生背景",children:[]},{level:2,title:"二、 Dapp 开发",slug:"二、-dapp-开发",children:[{level:3,title:"1. 开发前端界面前的准备",slug:"_1-开发前端界面前的准备",children:[]},{level:3,title:"2. StarMask",slug:"_2-starmask",children:[]},{level:3,title:"3. 官方的示例Starmask-test-dapp",slug:"_3-官方的示例starmask-test-dapp",children:[]},{level:3,title:"4. Starmask-test-dapp 分析",slug:"_4-starmask-test-dapp-分析",children:[]}]},{level:2,title:"三、开发常用的工具--Postman",slug:"三、开发常用的工具-postman",children:[{level:3,title:"1. Fork collection",slug:"_1-fork-collection",children:[]},{level:3,title:"2. 添加 Enviroment Json文件",slug:"_2-添加-enviroment-json文件",children:[]},{level:3,title:"3. 调用API",slug:"_3-调用api",children:[]}]}],filePathRelative:"blockchain/StarCoin/_blog/Starcoin与Dapp/Starcoin与Dapp.md",git:{updatedTime:1631856991e3,contributors:[]}}},1586:(n,s,a)=>{a.r(s),a.d(s,{default:()=>ls});var t=a(6252),e=a(7310),o=a(6793),c=a(3584),p=a(3925),l=a(3440),u=a(7140),k=a(156),_=a(5353),r=a(502),i=a(4766),d=a(8566),m=a(595);const U=(0,t._)("p",null,"#Starcoin & Dapp实战",-1),b=(0,t._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,t._)("pre",{class:"language-text"},[(0,t._)("code",null,"* 本文由Starcoin社区原创 作者:WGB\n")]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br")])],-1),g=(0,t._)("h2",{id:"一、dapp-的-产生背景",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#一、dapp-的-产生背景","aria-hidden":"true"},"#"),(0,t.Uk)(" 一、Dapp 的 产生背景")],-1),h=(0,t._)("p",null,[(0,t.Uk)("  随着计算机技术和互联网技术的不断发展，人们从最开始的大哥大到传呼机，从传呼机到手机，再到如今的智能穿戴设备等，人们一直在探索便携的交互体验。但随着科技的进步，人们也需求更多的功能，于是，手机的功能从最开始的通信设备变到如今的多媒体娱乐通信办公等多功能的设备，这些功能都是由App提供的，各个软件公司推出自己的App来提供服务，我们也体验到了科技进步带来的便捷，但是由于各个公司推出的App都是中心化的服务，这也就导致了如果软件公司由于各种各样的原因不去运行App的服务器，也不维护App，就会导致这个App被废弃，存储在其中的信息资料也随着公司的服务器的关闭而永久消失，如果是这些信息是游戏数据，那么你辛辛苦苦奋战的日日夜夜的游戏装备，游戏等级都将成为"),(0,t._)("code",null,'"时代的眼泪"'),(0,t.Uk)("。"),(0,t._)("br"),(0,t.Uk)("   但是当区块链技术发展到今天，我们可以利用区块链不可篡改，永久保留的特性对App进行升级为Dapp(Decentralized application )，以去中心化的方式创造并运行它，就算这条区块链被人遗忘，你同样可以通过运行一个节点的方式继续拥有你的数据。通过这篇文章希望大家了解如何通过Move语言在Starcoin链上使用和开发一个Dapp。")],-1),f=(0,t._)("h2",{id:"二、-dapp-开发",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#二、-dapp-开发","aria-hidden":"true"},"#"),(0,t.Uk)(" 二、 Dapp 开发")],-1),w=(0,t._)("p",null,"  Dapp 从结构上可以分为前端和后端，Dapp的前端与传统app的前端类似，但Dapp的后端是区块链，这和传统的后端不同，传统方式是前端→API→数据库，Dapp是前端→智能合约→区块链，所以Dapp的开发主要是前端界面的交互，本文主要以官方示例的Starmask-test-dapp 作为示例。",-1),S=(0,t._)("h3",{id:"_1-开发前端界面前的准备",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_1-开发前端界面前的准备","aria-hidden":"true"},"#"),(0,t.Uk)(" 1. 开发前端界面前的准备")],-1),x=(0,t._)("h4",{id:"_1-chrome-多账号分离开发环境",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_1-chrome-多账号分离开发环境","aria-hidden":"true"},"#"),(0,t.Uk)(" (1) Chrome 多账号分离开发环境")],-1),y=(0,t._)("blockquote",null,[(0,t._)("p",null,"对于需要多个测试账号的开发环境来说，Chrome的多账户功能可以方便的创建多账号的环境。")],-1),v=(0,t._)("p",null,[(0,t._)("img",{src:e,alt:"Chrome多账户"})],-1),A=(0,t._)("h4",{id:"_2-安装starmask",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_2-安装starmask","aria-hidden":"true"},"#"),(0,t.Uk)(" (2) 安装StarMask")],-1),I=(0,t.Uk)("在新身份的Chrome中通过下载zip包后解压安装或Chrome商店安装的方式安装StarMask,详细的安装使用过程可以查看"),C={href:"https://github.com/starcoinorg/starmask-extension/blob/main/docs/how-to-install.md",target:"_blank",rel:"noopener noreferrer"},D=(0,t.Uk)("官方文档"),M=(0,t.Uk)("进行安装"),P={href:"https://chrome.google.com/webstore/detail/empty-title/mfhbebgoclkghebffdldpobeajmbecfk?hl=zh-CN",target:"_blank",rel:"noopener noreferrer"},j=(0,t.Uk)("Chrome商店安装"),N=(0,t.Uk)(":"),T=(0,t._)("p",null,[(0,t._)("img",{src:o,alt:"Chrome商店安装"})],-1),B={href:"https://github.com/starcoinorg/starmask-extension/releases",target:"_blank",rel:"noopener noreferrer"},H=(0,t.Uk)("解压方式安装"),q=(0,t.Uk)(":"),E=(0,t._)("p",null,[(0,t._)("img",{src:c,alt:"解压方式安装"})],-1),L=(0,t._)("h4",{id:"_3-创建新的账户",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_3-创建新的账户","aria-hidden":"true"},"#"),(0,t.Uk)(" (3) 创建新的账户")],-1),z=(0,t._)("blockquote",null,[(0,t._)("p",null,"在安装StarMask后新建或导入账户后，就可以使用新的账户进行开发调试。")],-1),F=(0,t._)("p",null,[(0,t._)("img",{src:p,alt:"成功创建账户"})],-1),R=(0,t._)("h3",{id:"_2-starmask",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_2-starmask","aria-hidden":"true"},"#"),(0,t.Uk)(" 2. StarMask")],-1),W=(0,t._)("blockquote",null,[(0,t._)("p",null,[(0,t.Uk)('  Dapp的使用与区块链密不可分，但由于与区块链的交互需要使用私钥进行签名等操作，所以大多的Dapp不会直接获取用户的私钥，而是通过一个"中间件"插件钱包，来管理用户的秘钥，使Dapp不会直接获取用户的秘钥信息，当用户需要与区块链进行交互时，通过钱包插件向用户发起确认请求，用户做出响应操作后，插件会把签名好的交易信息发送区块链上进行交互或将拒绝信息返回Dapp。'),(0,t._)("br"),(0,t.Uk)("   Starcoin 使用的StarMask正是官方推出的插件钱包，它可以帮助我们安全的保存、使用自己的资产。"),(0,t._)("br"),(0,t.Uk)("   StarMask 与MetaMask的整体架构类似，并且和web3 类似的提供了一个全局的变量，以便JavaScript SDK可以方便的与钱包插件进行交互。")])],-1),J=(0,t._)("p",null,[(0,t._)("strong",null,"MetaMask架构图："),(0,t._)("br"),(0,t._)("img",{src:l,alt:"MetaMask架构图"})],-1),G=(0,t._)("p",null,[(0,t._)("strong",null,"Starcoin全局变量："),(0,t._)("br"),(0,t._)("img",{src:u,alt:"Starcoin全局变量"})],-1),O=(0,t._)("h4",{id:"_1-starmask-的依赖库",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_1-starmask-的依赖库","aria-hidden":"true"},"#"),(0,t.Uk)(" (1) StarMask 的依赖库")],-1),$=(0,t._)("blockquote",null,[(0,t._)("p",null,"  StarMask是官方开发并且开源的钱包插件，它是使用JavaScript编写的，下图是StarMask所依赖的库。")],-1),K=(0,t._)("p",null,[(0,t._)("img",{src:k,alt:"StarMask依赖库"})],-1),V=(0,t._)("h3",{id:"_3-官方的示例starmask-test-dapp",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_3-官方的示例starmask-test-dapp","aria-hidden":"true"},"#"),(0,t.Uk)(" 3. 官方的示例Starmask-test-dapp")],-1),Y=(0,t._)("blockquote",null,[(0,t._)("p",null,"  Starcoin 和以太坊一样，也提供了一个JavaScript SDK ，可以通过SDK进行前端网页的开发，官方也提供了一个Dapp的示例，可以上面测试钱包的链接、发送STC、调用合约、铸造示例NFT，签名验证等等，功能上基本涵盖了常用的功能，源码也在Github上开源，我们开发Dapp时可以以此为基础进行开发。")],-1),Z={href:"https://starmask-test-dapp.starcoin.org/",target:"_blank",rel:"noopener noreferrer"},X=(0,t.Uk)("官方示例Dapp"),Q=(0,t.Uk)(":"),nn=(0,t._)("p",null,[(0,t.Uk)("体验入口：https://starmask-test-dapp.starcoin.org/"),(0,t._)("br"),(0,t.Uk)(" GitHub仓库地址：https://github.com/starcoinorg/starmask-test-dapp")],-1),sn=(0,t._)("p",null,[(0,t._)("img",{src:_,alt:"Dapp-test"})],-1),an=(0,t._)("h3",{id:"_4-starmask-test-dapp-分析",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_4-starmask-test-dapp-分析","aria-hidden":"true"},"#"),(0,t.Uk)(" 4. Starmask-test-dapp 分析")],-1),tn=(0,t._)("blockquote",null,[(0,t._)("p",null,"  我们在开发时可以对Starmask-test-dapp进行功能和流程分析，从中学到Dapp开发的流程和代码库的使用，整体的开发流程和代码库与以太坊上的开发类似，如果有以太坊上开发的经验，可以很轻松的转移到Starcoin上来。")],-1),en=(0,t._)("h4",{id:"_1-starmask-test-dapp-依赖库",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_1-starmask-test-dapp-依赖库","aria-hidden":"true"},"#"),(0,t.Uk)(" (1) Starmask-test-dapp 依赖库")],-1),on=(0,t._)("blockquote",null,[(0,t._)("p",null,"Starmask-test-dapp 主要依赖有starmask-onboarding、starmask-forwarder和starcoin.js。"),(0,t._)("ul",null,[(0,t._)("li",null,[(0,t.Uk)("starmask-onboarding:用来检测是否安装StarMask，如果未安装，可以点击按钮进行安装跳转，如果已经安装则可以显示为"),(0,t._)("code",null,'"点击连接钱包"')]),(0,t._)("li",null,"starcoin.js:用来和区块链交互、格式转换等的工具库，是开发Dapp主要使用的SDK。")])],-1),cn=(0,t._)("p",null,[(0,t._)("img",{src:r,alt:"test-dapp"})],-1),pn=(0,t._)("h4",{id:"_2-简要功能分析",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_2-简要功能分析","aria-hidden":"true"},"#"),(0,t.Uk)(" (2) 简要功能分析")],-1),ln=(0,t._)("blockquote",null,[(0,t._)("p",null,"在Starmask-test-dapp上主要的操作有连接钱包、获取链信息，获取账号，请求权限、签名与验证、发送交易、部署和调用合约。")],-1),un=(0,t._)("ul",null,[(0,t._)("li",null,"连接钱包:用来将Dapp连接到StarMask的操作，使Dapp可以执行后续的操作，这也是使用Dapp的第一步"),(0,t._)("li",null,"获取链信息:用来查看当前的链是主网还是测试网或者是本地网络"),(0,t._)("li",null,"获取账号:用来获取已经连接的账号"),(0,t._)("li",null,"请求权限:当连接钱包后，StarMask中有多个账号时，通过请求权限功能进行切换"),(0,t._)("li",null,"签名与验证:用来签名一段信息，并可以验证信息的签名者"),(0,t._)("li",null,"发送交易:一般用来发送STC"),(0,t._)("li",null,"部署合约:可以通过二进制的方式部署合约，不需要同步主网或测试网"),(0,t._)("li",null,"调用合约:在Dapp上调用合约，这是主要的Dapp与区块链的交互方式")],-1),kn=(0,t._)("h4",{id:"_3-简要功能代码分析",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_3-简要功能代码分析","aria-hidden":"true"},"#"),(0,t.Uk)(" (3) 简要功能代码分析")],-1),_n=(0,t._)("h5",{id:"_1-链接钱包",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_1-链接钱包","aria-hidden":"true"},"#"),(0,t.Uk)(" 1) 链接钱包")],-1),rn=(0,t._)("blockquote",null,[(0,t._)("p",null,"在 Starmask-test-dapp 中通过以下代码链接StarMask钱包，通过全局的 starcoin 变量调用 stc_requestAccounts 方法进行连接")],-1),dn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token function-variable function"},"onClickConnect"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"async"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"try"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" newAccounts "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(" window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("starcoin"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"request"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        method"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'stc_requestAccounts'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token function"},"handleNewAccounts"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("newAccounts"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"catch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("error"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"error"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("error"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br")])],-1),mn=(0,t._)("h5",{id:"_2-获取链信息",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_2-获取链信息","aria-hidden":"true"},"#"),(0,t.Uk)(" 2) 获取链信息")],-1),Un=(0,t._)("blockquote",null,[(0,t._)("p",null,"在 Starmask-test-dapp 中通过以下代码获取链信息， 通过全局的 starcoin 变量调用 chain.id 方法进行获取")],-1),bn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"async"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"getNetworkAndChainId"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"try"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" chainInfo "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(" window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("starcoin"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"request"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        method"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'chain.id'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token function"},"handleNewChain"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token string"},"0x"),(0,t._)("span",{class:"token interpolation"},[(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("chainInfo"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("id"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toString"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"16"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token function"},"handleNewNetwork"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("chainInfo"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("id"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"catch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("err"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"error"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("err"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br")])],-1),gn=(0,t._)("h5",{id:"_3-获取账号",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_3-获取账号","aria-hidden":"true"},"#"),(0,t.Uk)(" 3) 获取账号")],-1),hn=(0,t._)("blockquote",null,[(0,t._)("p",null,"在 Starmask-test-dapp 中通过以下代码获取账号， 通过全局的 starcoin 变量调用 stc_accounts 方法进行获取")],-1),fn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t.Uk)(" getAccountsButton"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function-variable function"},"onclick"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"async"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"try"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" _accounts "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(" window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("starcoin"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"request"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          method"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'stc_accounts'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        getAccountsResults"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" _accounts"),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'Not able to get accounts'"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"catch"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("err"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"error"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("err"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        getAccountsResults"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token string"},"Error: "),(0,t._)("span",{class:"token interpolation"},[(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("err"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("message"),(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br")])],-1),wn=(0,t._)("h5",{id:"_4-请求权限",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_4-请求权限","aria-hidden":"true"},"#"),(0,t.Uk)(" 4) 请求权限")],-1),Sn=(0,t._)("blockquote",null,[(0,t._)("p",null,"在 Starmask-test-dapp 中通过以下代码请求权限， 通过全局的 starcoin 变量调用 wallet_requestPermissions 方法进行请求")],-1),xn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" permissionsArray "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(" window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("starcoin"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"request"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          method"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'wallet_requestPermissions'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          params"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" stc_accounts"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br")])],-1),yn=(0,t._)("h5",{id:"_5-签名与验证",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_5-签名与验证","aria-hidden":"true"},"#"),(0,t.Uk)(" 5) 签名与验证")],-1),vn=(0,t._)("blockquote",null,[(0,t._)("p",null,"在 Starmask-test-dapp 中通过以下代码签名和验证， 通过全局的 starcoin 变量调用 personal_sign 方法进行签名，使用starcoin.js中的工具函数进行验证签名地址")],-1),An=(0,t._)("p",null,[(0,t._)("strong",null,"签名:")],-1),In=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" msg "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token string"},"0x"),(0,t._)("span",{class:"token interpolation"},[(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("Buffer"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"from"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("exampleMessage"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'utf8'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toString"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'hex'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" msg "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" networkId "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" networkDiv"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" extraParams "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" networkId "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" sign "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(" window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("starcoin"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"request"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          method"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'personal_sign'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token comment"},"// params: [msg, from, 'Example password'],"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token comment"},"// extraParams = params[2] || {}; means it should be an object:"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token comment"},"// params: [msg, from, { pwd: 'Example password' }],"),(0,t.Uk)("\n          params"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("msg"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" from"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" extraParams"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br")])],-1),Cn=(0,t._)("p",null,[(0,t._)("strong",null,"验证:")],-1),Dn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" from "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" accounts"),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" sign "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" personalSignResult"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML\n"),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" recoveredAddr "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(" utils"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("signedMessage"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"recoverSignedMessageAddress"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("sign"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\nconsole"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" recoveredAddr "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br")])],-1),Mn=(0,t._)("h5",{id:"_6-发送交易",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_6-发送交易","aria-hidden":"true"},"#"),(0,t.Uk)(" 6) 发送交易")],-1),Pn=(0,t._)("blockquote",null,[(0,t._)("p",null,"在Starmask-test-dapp 中通过以下代码发送交易，通过获取交易金额、收款人信息进行组包后，发送交易")],-1),jn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" sendAmount "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"parseFloat"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getElementById"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'amountInput'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("value"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"10"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("sendAmount "),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// eslint-disable-next-line no-alert"),(0,t.Uk)("\n        window"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"alert"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'Invalid sendAmount: should be a number!'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"false"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token constant"},"BIG_NUMBER_NANO_STC_MULTIPLIER"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"BigNumber"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'1000000000'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" sendAmountSTC "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"BigNumber"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"String"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getElementById"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'amountInput'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("value"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"10"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" sendAmountNanoSTC "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" sendAmountSTC"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"times"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token constant"},"BIG_NUMBER_NANO_STC_MULTIPLIER"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" sendAmountHex "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token string"},"0x"),(0,t._)("span",{class:"token interpolation"},[(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("sendAmountNanoSTC"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toString"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"16"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t.Uk)("\n      console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" sendAmountHex"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" sendAmountNanoSTC"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" sendAmountNanoSTC"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toString"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"10"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" txParams "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        to"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" toAccount"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        value"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" sendAmountHex"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        gasLimit"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"127845"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        gasPrice"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" expiredSecs "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"parseInt"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getElementById"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'expiredSecsInput'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("value"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"10"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" expiredSecs "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("expiredSecs "),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        txParams"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("expiredSecs "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" expiredSecs\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n      console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" txParams "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" transactionHash "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(" starcoinProvider"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getSigner"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"sendUncheckedTransaction"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("txParams"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br")])],-1),Nn=(0,t._)("h5",{id:"_7-部署合约",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_7-部署合约","aria-hidden":"true"},"#"),(0,t.Uk)(" 7) 部署合约")],-1),Tn=(0,t._)("blockquote",null,[(0,t._)("p",null,"在Starmask-test-dapp 中通过以下代码部署合约，首先应该在本地把合约编译为二进制包，然后输入到Starmask-test-dapp，再通过组包后发送交易，就可以部署合约")],-1),Bn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" packageHex "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" contractPayloadhex"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("value\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" transactionPayloadHex "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" encoding"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"packageHexToTransactionPayloadHex"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("packageHex"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        transactionHash "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(" starcoinProvider"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getSigner"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"sendUncheckedTransaction"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          data"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" transactionPayloadHex"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br")])],-1),Hn=(0,t._)("h5",{id:"_8-调用合约",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_8-调用合约","aria-hidden":"true"},"#"),(0,t.Uk)(" 8) 调用合约")],-1),qn=(0,t._)("blockquote",null,[(0,t._)("p",null,[(0,t.Uk)("在Starmask-test-dapp 中通过以下两种方式调用合约，不需要签名的合约可以通过Call来调用，需要签名的合约需要通过组包、发送交易的方式调用"),(0,t._)("br"),(0,t._)("strong",null,"不需签名的合约:")])],-1),En=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" result "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"starcoinProvider"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          function_id"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token interpolation"},[(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("accounts"),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t._)("span",{class:"token string"},"::ABC::token_address"),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          type_args"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          args"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br")])],-1),Ln=(0,t._)("p",null,[(0,t._)("strong",null,"需要签名的合约:")],-1),zn=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t.Uk)("   "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token constant"},"BIG_NUMBER_NANO_STC_MULTIPLIER"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"BigNumber"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'1000000000'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" sendAmountSTC "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"BigNumber"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"String"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getElementById"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'amountInput'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("value"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"10"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" sendAmountNanoSTC "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" sendAmountSTC"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"times"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token constant"},"BIG_NUMBER_NANO_STC_MULTIPLIER"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" sendAmountHex "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token string"},"0x"),(0,t._)("span",{class:"token interpolation"},[(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("sendAmountNanoSTC"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toString"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"16"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t.Uk)("\n\n        "),(0,t._)("span",{class:"token comment"},"// Multiple BcsSerializers should be used in different closures, otherwise, the latter will be contaminated by the former."),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" amountSCSHex "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" se "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t.Uk)("bcs"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("BcsSerializer")]),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token comment"},"// eslint-disable-next-line no-undef"),(0,t.Uk)("\n          se"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"serializeU128"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"BigInt"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("sendAmountNanoSTC"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toString"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"10"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"hexlify"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("se"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getBytes"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" sendAmountHex"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" sendAmountNanoSTC"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" sendAmountNanoSTC"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toString"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"10"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" amountSCSHex "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" args "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token function"},"arrayify"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("toAccount"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token function"},"arrayify"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("amountSCSHex"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" scriptFunction "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" utils"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("tx"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"encodeScriptFunction"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("functionId"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" tyArgs"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" args"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("scriptFunction"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n        "),(0,t._)("span",{class:"token comment"},"// Multiple BcsSerializers should be used in different closures, otherwise, the latter will be contaminated by the former."),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" payloadInHex "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" se "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t.Uk)("bcs"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("BcsSerializer")]),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n          scriptFunction"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"serialize"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("se"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n          "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"hexlify"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("se"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getBytes"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" payloadInHex "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" txParams "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          data"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" payloadInHex"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" expiredSecs "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"parseInt"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("document"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getElementById"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'expiredSecsInput'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("value"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"10"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" expiredSecs "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("expiredSecs "),(0,t._)("span",{class:"token operator"},">"),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          txParams"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("expiredSecs "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" expiredSecs\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"log"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" txParams "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" transactionHash "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"await"),(0,t.Uk)(" starcoinProvider"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"getSigner"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"sendUncheckedTransaction"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("txParams"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"32"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"33"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"34"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"35"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"36"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"37"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"38"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"39"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"40"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"41"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"42"),(0,t._)("br")])],-1),Fn=(0,t._)("h2",{id:"三、开发常用的工具-postman",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#三、开发常用的工具-postman","aria-hidden":"true"},"#"),(0,t.Uk)(" 三、开发常用的工具--Postman")],-1),Rn=(0,t._)("blockquote",null,[(0,t._)("p",null,"  做前后端交互时，我们通常需要进行调用合约的调试。Starcoin的合约调用调试以Postman为例，Fork collection 到自己的工作区后，再添加如Main、barnard、localhost等网络信息就可以方便的使用API与合约交互或调试。")],-1),Wn=(0,t._)("h3",{id:"_1-fork-collection",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_1-fork-collection","aria-hidden":"true"},"#"),(0,t.Uk)(" 1. Fork collection")],-1),Jn=(0,t.Uk)("在官网的 "),Gn={href:"https://starcoin.org/zh/developer/rpc/postman_document/",target:"_blank",rel:"noopener noreferrer"},On=(0,t.Uk)("Postman 使用指南"),$n=(0,t.Uk)(" 页面点击 "),Kn={href:"https://god.gw.postman.com/run-collection/13565741-60ce2c25-25bc-44ff-be4e-a080910cd108?action=collection%2Ffork&collection-url=entityId%3D13565741-60ce2c25-25bc-44ff-be4e-a080910cd108%26entityType%3Dcollection%26workspaceId%3D921ce6e5-b414-4d15-89d9-0820c7c3d25a#?env%5Bstarcoin_main%5D=W3sia2V5IjoidXJsIiwidmFsdWUiOiJodHRwczovL21haW4tc2VlZC5zdGFyY29pbi5vcmciLCJlbmFibGVkIjp0cnVlfSx7ImtleSI6ImNoYWluX2lkIiwidmFsdWUiOiIxIiwiZW5hYmxlZCI6dHJ1ZX1d",target:"_blank",rel:"noopener noreferrer"},Vn=(0,t.Uk)("Run in Postman"),Yn=(0,t.Uk)(" 按钮，可以把Starcoin的 API 示例 fork 到你自己的工作区。"),Zn=(0,t._)("br",null,null,-1),Xn=(0,t._)("img",{src:i,alt:"官网的交互页面"},null,-1),Qn=(0,t._)("h3",{id:"_2-添加-enviroment-json文件",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_2-添加-enviroment-json文件","aria-hidden":"true"},"#"),(0,t.Uk)(" 2. 添加 Enviroment Json文件")],-1),ns=(0,t.Uk)("在官网的 "),ss={href:"https://starcoin.org/zh/developer/rpc/postman_document/",target:"_blank",rel:"noopener noreferrer"},as=(0,t.Uk)("Postman 使用指南"),ts=(0,t.Uk)(" 页面的最下方右键复制链接，并在 Postman 中添加到 Enviroment 后，就可以在 Postman 中发送请求，完成与合约的交互。详细的设置过程可以参考官网的 Postman 使用指南 页面。"),es=(0,t._)("br",null,null,-1),os=(0,t._)("img",{src:d,alt:"下载Enviroment_Json文件"},null,-1),cs=(0,t._)("h3",{id:"_3-调用api",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#_3-调用api","aria-hidden":"true"},"#"),(0,t.Uk)(" 3. 调用API")],-1),ps=(0,t._)("p",null,[(0,t._)("img",{src:m,alt:"Postman设置成功"})],-1),ls={render:function(n,s){const a=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.iD)(t.HY,null,[U,b,g,h,f,w,S,x,y,v,A,(0,t._)("blockquote",null,[(0,t._)("p",null,[I,(0,t._)("a",C,[D,(0,t.Wm)(a)]),M])]),(0,t._)("p",null,[(0,t._)("strong",null,[(0,t._)("a",P,[j,(0,t.Wm)(a)]),N])]),T,(0,t._)("p",null,[(0,t._)("strong",null,[(0,t._)("a",B,[H,(0,t.Wm)(a)]),q])]),E,L,z,F,R,W,J,G,O,$,K,V,Y,(0,t._)("p",null,[(0,t._)("strong",null,[(0,t._)("a",Z,[X,(0,t.Wm)(a)]),Q])]),nn,sn,an,tn,en,on,cn,pn,ln,un,kn,_n,rn,dn,mn,Un,bn,gn,hn,fn,wn,Sn,xn,yn,vn,An,In,Cn,Dn,Mn,Pn,jn,Nn,Tn,Bn,Hn,qn,En,Ln,zn,Fn,Rn,Wn,(0,t._)("p",null,[Jn,(0,t._)("a",Gn,[On,(0,t.Wm)(a)]),$n,(0,t._)("a",Kn,[Vn,(0,t.Wm)(a)]),Yn,Zn,Xn]),Qn,(0,t._)("p",null,[ns,(0,t._)("a",ss,[as,(0,t.Wm)(a)]),ts,es,os]),cs,ps],64)}}},6793:(n,s,a)=>{n.exports=a.p+"assets/img/Chrome商店安装.a90d2725.png"},7310:(n,s,a)=>{n.exports=a.p+"assets/img/Chrome多账户.9f65f28d.png"},5353:(n,s,a)=>{n.exports=a.p+"assets/img/Dapp-test.9728ff6f.png"},3440:(n,s,a)=>{n.exports=a.p+"assets/img/MetaMask架构图.7cfde3b8.png"},595:(n,s,a)=>{n.exports=a.p+"assets/img/Postman设置成功.d246546c.png"},156:(n,s,a)=>{n.exports=a.p+"assets/img/StarMask依赖库.76a30a47.png"},7140:(n,s,a)=>{n.exports=a.p+"assets/img/Starcoin全局变量.62e8f167.png"},502:(n,s,a)=>{n.exports=a.p+"assets/img/test-dapp.e4e9bb6b.png"},8566:(n,s,a)=>{n.exports=a.p+"assets/img/下载Enviroment_Json文件.055cc637.png"},4766:(n,s,a)=>{n.exports=a.p+"assets/img/官网的交互页面.f45f427b.png"},3925:(n,s,a)=>{n.exports=a.p+"assets/img/成功创建账户.7fc35280.png"},3584:(n,s,a)=>{n.exports=a.p+"assets/img/解压方式安装.a6a7f0c8.png"}}]);